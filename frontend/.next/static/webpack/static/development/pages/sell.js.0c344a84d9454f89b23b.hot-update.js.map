{"version":3,"file":"static/webpack/static/development/pages/sell.js.0c344a84d9454f89b23b.hot-update.js","sources":["webpack:///./components/CreateItem.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { Mutation } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport Router from 'next/router'\nimport Form from './styles/Form'\nimport formatMoney from '../lib/formatMoney'\nimport Error from './ErrorMessage'\n\nconst CREATE_ITEM_MUTATION = gql`\n  mutation CREATE_ITEM_MUTATION(\n    $title: String!\n    $description: String!\n    $price: Int!\n    $image: String\n    $largeImage: String\n  ) {\n    createItem(\n      title: $title\n      description: $description\n      price: $price\n      image: $image\n      largeImage: $largeImage\n    ) {\n      id\n    }\n  }\n`\n\nclass CreateItem extends Component {\n  state = {\n    title:'cool',\n    description: '',\n    image: '',\n    largeImage: '',\n    price: 0\n  }  \n  handleChange = event => { \n    const { name, type, value } = event.target\n    const val = type === 'number' ? parseFloat(value) : value\n    this.setState({ [name]: val })\n  }\n   uploadFile = async event => {\n    const files = event.target.files\n    const data = new FormData() \n    data.append('file', files[0])\n    data.append('upload_preset', 'boutique')\n\n    const res = await fetch('https://api.cloudinary.com/v1_1/aereli/image/upload',\n    {\n      method: 'POST',\n      body: data\n    })\n    const file = await res.json()\n    console.log(file)\n    this.setState({ image: file.secure_url,\n                    largeImage: file.eager[0].secure_url\n                  })\n  }\n\n  render() {\n    return (\n      <div>\n        <Mutation mutation={ CREATE_ITEM_MUTATION } variables={this.state}>\n          {( createItem, {loading, error}) => (\n            <Form onSubmit={ async e => { e.preventDefault()\n              const res = await createItem()\n              Router.push({\n                pathname: '/item',\n                query: {id: res.data.createItem.id}\n              })\n            }}> \n            <Error error={error} />\n            <fieldset disabled={loading} aria-busy={loading}>\n              <label htmlFor=\"file\">\n                Image\n                <input\n                  type=\"file\"\n                  id=\"file\"\n                  name=\"file\"\n                  placeholder=\"Upload an image!\"\n                  required\n                  // value={this.state.image}\n                  onChange={this.uploadFile}\n                />\n              </label>\n                <label htmlFor=\"title\">\n                  Title \n                  <input\n                    type=\"text\"\n                    id=\"title\"\n                    name=\"title\"\n                    placeholder=\"Title\"\n                    required\n                    value={this.state.title}\n                    onChange={this.handleChange}\n                  />\n                </label>\n\n                <label htmlFor=\"price\">\n                  Price\n                  <input\n                    type=\"number\"\n                    id=\"price\"\n                    name=\"price\"\n                    placeholder=\"Price\"\n                    required\n                    value={this.state.price}\n                    onChange={this.handleChange}\n                  />\n                </label>\n\n                <label htmlFor=\"description\">\n                  Description\n                  <textarea\n                    id=\"description\"\n                    name=\"description\"\n                    placeholder=\"Enter A Description\"\n                    required\n                    value={this.state.description}\n                    onChange={this.handleChange}\n                  />\n                </label>\n                <button type=\"submit\">Submit</button>\n                {this.state.image && <img src={this.state.image} alt=\"image preview\"></img>}\n              </fieldset>\n            </Form>\n          )}\n        </Mutation>\n      </div>\n    )\n  }\n}\n\nexport default CreateItem\nexport {CREATE_ITEM_MUTATION}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAmBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAQA;AACA;AAFA;AACA;AARA;AAMA;AANA;AAAA;AACA;AADA;AAWA;AACA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAiBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAOA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5DA;AAmEA;;;;AAtGA;AACA;AAwGA;;;;;A","sourceRoot":""}